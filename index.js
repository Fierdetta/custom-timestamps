(function(n,f,a,h,l,c,i){"use strict";function u(e){switch(arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.storage.selected){case"calendar":return e.calendar();case"relative":return e.fromNow();case"iso":return e.toISOString();case"custom":return e.format(a.storage.customFormat)}}const{ClearButtonVisibility:R,default:y}=c.findByProps("ClearButtonVisibility");function v(e){let{value:t,onChangeText:s,placeholder:r,disabled:o}=e;return React.createElement(y,{value:t,onChangeText:s,placeholder:r,clearButtonVisibility:R.WITH_CONTENT,showBorder:!1,showTopContainer:!1,disabled:o,style:{paddingHorizontal:15,paddingVertical:13}})}const{FormRow:E}=l.Forms,w=c.findByName("RowCheckmark");function p(e){let{label:t,subLabel:s,selected:r,onPress:o}=e;return React.createElement(E,{label:t,subLabel:s,trailing:React.createElement(w,{selected:r}),onPress:o})}const{ScrollView:M}=l.General,{FormSection:d,FormDivider:T,FormSwitchRow:C}=l.Forms;let g=[{label:"Calendar",key:"calendar"},{label:"Relative",key:"relative"},{label:"ISO 8601",key:"iso"},{label:"Custom",key:"custom",renderExtra:function(e){return React.createElement(v,{value:a.storage.customFormat,onChangeText:function(t){return a.storage.customFormat=t},placeholder:"dddd, MMMM Do YYYY, h:mm:ss a",disabled:!e})}}];function F(){return h.useProxy(a.storage),React.createElement(M,null,React.createElement(d,{title:"Mode"},g.map(function(e,t){let{label:s,key:r,renderExtra:o}=e;return React.createElement(React.Fragment,null,React.createElement(p,{label:s,subLabel:u(f.moment(),r),selected:a.storage.selected===r,onPress:function(){return a.storage.selected=r}}),o&&o(a.storage.selected===r),t!==g.length-1&&React.createElement(T,null))})),React.createElement(d,null,React.createElement(C,{label:"Separate messages",subLabel:"Always shows username, avatar and timestamp for each message",value:a.storage.separateMessages,onValueChange:function(e){a.storage.separateMessages=e}})))}const b=c.findByName("RowManager");let m=[];var S={onLoad:function(){a.storage.selected??="calendar",a.storage.customFormat??="dddd, MMMM Do YYYY, h:mm:ss a",m.push(i.before("generate",b.prototype,function(e){let[t]=e;t.rowType===1&&(a.storage.separateMessages&&(t.isFirst=!0),t.message.__customTimestamp=u(t.message.timestamp))})),m.push(i.after("generate",b.prototype,function(e,t){let[s]=e,{message:r}=t;s.rowType===1&&s.message.__customTimestamp&&r.state==="SENT"&&r.timestamp&&(r.timestamp=s.message.__customTimestamp)}))},onUnload:function(){m.forEach(function(e){return e()})},settings:F};return n.default=S,Object.defineProperty(n,"__esModule",{value:!0}),n})({},vendetta.metro.common,vendetta.plugin,vendetta.storage,vendetta.ui.components,vendetta.metro,vendetta.patcher);
