(function(n,s,g,t,b,c,m){"use strict";function u(e,a){switch(a){case"calendar":return e.calendar();case"relative":return e.fromNow();case"custom":return e.format(t.storage.customFormat)}}const{ScrollView:h}=c.General,{FormSection:d,FormRow:y,FormDivider:R,FormSwitchRow:v}=c.Forms,w=s.findByName("RowCheckmark"),{ClearButtonVisibility:E,default:M}=s.findByProps("ClearButtonVisibility");function p(e){let{label:a,subLabel:o,selected:r,onPress:Y}=e;return React.createElement(y,{label:a,subLabel:o,trailing:React.createElement(w,{selected:r}),onPress:Y})}function C(e){let{value:a,onChangeText:o,placeholder:r}=e;return React.createElement(M,{value:a,onChangeText:o,placeholder:r,clearButtonVisibility:E.WITH_CONTENT,showBorder:!1,showTopContainer:!1,style:{paddingHorizontal:15,paddingVertical:13}})}let i=[{label:"Calendar",key:"calendar"},{label:"Relative",key:"relative"},{label:"Custom",key:"custom"}];function F(){return b.useProxy(t.storage),React.createElement(h,null,React.createElement(d,null,i.map(function(e,a){let{label:o,key:r}=e;return React.createElement(React.Fragment,null,React.createElement(p,{label:o,subLabel:u(g.moment(),r),selected:t.storage.selected===r,onPress:function(){return t.storage.selected=r}}),a!==i.length-1&&React.createElement(R,null))}),t.storage.selected==="custom"&&React.createElement(C,{value:t.storage.customFormat,onChangeText:function(e){return t.storage.customFormat=e},placeholder:"dddd, MMMM Do YYYY, h:mm:ss a"})),React.createElement(d,null,React.createElement(v,{label:"Separate messages",subLabel:"Always shows username, avatar and timestamp for each message",value:t.storage.separateMessages,onValueChange:function(e){t.storage.separateMessages=e}})))}const f=s.findByName("RowManager");let l=[];var T={onLoad:function(){t.storage.selected??="calendar",t.storage.customFormat??="dddd, MMMM Do YYYY, h:mm:ss a",l.push(m.before("generate",f.prototype,function(e){let[a]=e;a.rowType===1&&t.storage.separateMessages&&(a.isFirst=!0)})),l.push(m.after("generate",f.prototype,function(e,a){let[o]=e,{message:r}=a;o.rowType===1&&r.timestamp&&(r.timestamp=u(o.message.timestamp,t.storage.selected))}))},onUnload:function(){l.forEach(function(e){return e()})},settings:F};return n.default=T,Object.defineProperty(n,"__esModule",{value:!0}),n})({},vendetta.metro,vendetta.metro.common,vendetta.plugin,vendetta.storage,vendetta.ui.components,vendetta.patcher);
